#!/usr/bin/env python
# -*- coding: utf-8 -*-
import sys
import traceback
import json
import youtube_dl

default_encoding = 'utf-8'
if sys.getdefaultencoding()!=default_encoding:
    reload(sys)
    sys.setdefaultencoding(default_encoding)
	
def SniffingURL(url, proxy=None, username=None, password=None):
	ydl_opts = {
		'skip_download':True,
		'dump_single_json':True,
		'quiet':True,
		'simulate':True,
		'username': username,
		'password': password,
		'proxy':proxy,
        'nocheckcertificate': True
	}
	'''print(url)'''
	ydl = youtube_dl.YoutubeDL(ydl_opts)
	result = ''
	try:
		jsonresult = ydl.extract_info(url, False)
		result = json.dumps(jsonresult)
		'''print(result)'''
	except:
		result = '%s' % traceback.format_exc()
		print(result)
	return result
